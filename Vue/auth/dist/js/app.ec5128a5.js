(function(e){function t(t){for(var r,o,i=t[0],u=t[1],l=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,i=1;i<a.length;i++){var u=a[i];0!==s[u]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},s={app:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-and-logout"),a("router-view")],1)},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[a("ul",{staticClass:"navbar-nav"},[a("router-link",{staticClass:"nav-item",attrs:{tag:"li","active-class":"active",exact:"",to:"/"}},[a("a",{staticClass:"nav-link"},[e._v("Главная")])]),a("router-link",{staticClass:"nav-item",attrs:{tag:"li","active-class":"active",to:"/login/"}},[a("a",{staticClass:"nav-link"},[e._v("Авторизация")])]),a("router-link",{staticClass:"nav-item",attrs:{tag:"li","active-class":"active",to:"/register/"}},[a("a",{staticClass:"nav-link"},[e._v("Регистрация")])]),a("router-link",{staticClass:"nav-item",attrs:{tag:"li","active-class":"active",to:"/pass_reset/"}},[a("a",{staticClass:"nav-link"},[e._v("Сброс пароля")])])],1),a("div",{staticClass:"ml-auto my-auto"},[e.username&&""!==e.token?a("p",[e._v("Здравствуйте "+e._s(e.username))]):a("p",[e._v("Вы не авторизованы")]),e.username&&""!==e.token?a("p",[e._v("Токен авторизации: "+e._s(e.token))]):e._e(),""!==e.token?a("form",{on:{submit:function(t){return t.preventDefault(),e.logOut()}}},[a("button",{staticClass:"btn btn-info"},[e._v("Выход из профиля")])]):e._e()])])])},i=[],u=(a("d3b7"),a("96cf"),a("1da1")),l={methods:{logOut:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.$store.getters.getDomen+"auth/token/logout/",{method:"post",headers:{Authorization:"Token "+e.token}});case 2:e.$store.commit("logOut");case 3:case"end":return t.stop()}}),t)})))()}},computed:{token:function(){return this.$store.getters.getToken},username:function(){return this.$store.getters.getUsername}}},c=l,m=a("2877"),d=Object(m["a"])(c,o,i,!1,null,"680e9b8e",null),v=d.exports,p={components:{NavAndLogout:v}},f=p,_=Object(m["a"])(f,s,n,!1,null,null,null),g=_.exports,w=a("8c4f"),h=a("f3e7"),b=a("2f62");r["a"].use(b["a"]);var D=new b["a"].Store({state:{username:"",token:"",domen:"http://127.0.0.1:8000/"},mutations:{setToken:function(e,t){var a=t.auth_token;e.token=a,sessionStorage.token=a},setUsername:function(e,t){e.username=t,sessionStorage.username=t},logOut:function(e){e.username="",sessionStorage.username="",e.token="",sessionStorage.token=""}},actions:{},getters:{getToken:function(e){return sessionStorage.token&&(e.token=sessionStorage.getItem("token")),void 0===e.token&&(e.token=""),e.token},getUsername:function(e){return sessionStorage.username&&(e.username=sessionStorage.getItem("username")),e.username},getDomen:function(e){return e.domen}}}),$=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Главная")]),a("p",[e._v(" Главная страница тестового задания по авторизации Vue + Django. "),a("br"),e._v(" Проверить работу программы можно переходя по ссылкам в навигации. ")])])}],C={},y=C,x=Object(m["a"])(y,$,k,!1,null,"c37838fe",null),O=x.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Страница авторизации")]),e.hasUser?e._e():a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._l(e.serverMsg.username,(function(t){return a("div",{key:t},[e._v(" "+e._s(t)+" ")])})),e._l(e.serverMsg.password,(function(t){return a("div",{key:t},[e._v(" "+e._s(t)+" ")])}))],2),a("form",{on:{submit:function(t){return t.preventDefault(),e.logIn()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[e._v("Имя пользователя")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.username,expression:"userData.username"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.username.$error},attrs:{type:"text",id:"username",name:"username"},domProps:{value:e.userData.username},on:{blur:function(t){return e.$v.userData.username.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"username",t.target.value)}}}),e.$v.userData.username.required?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Имя пользователя" обязательно к заполнению ')])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v("Пароль")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.password,expression:"userData.password"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.password.$error},attrs:{type:"password",id:"password",name:"password"},domProps:{value:e.userData.password},on:{blur:function(t){return e.$v.userData.password.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"password",t.target.value)}}}),e.$v.userData.password.required?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Пароль" обязательно к заполнению ')])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Авторизация")])])])},q=[],S=a("b5ae"),M={data:function(){return{userData:{username:"",password:""},hasUser:!0,serverMsg:""}},methods:{logIn:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.$store.getters.getDomen+"auth/token/login/",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.userData)});case 2:if(a=t.sent,200!==a.status){t.next=15;break}return e.hasUser=!0,t.t0=e.$store,t.next=8,a.json();case 8:t.t1=t.sent,t.t0.commit.call(t.t0,"setToken",t.t1),e.$store.commit("setUsername",e.userData.username),e.userData.username="",e.userData.password="",t.next=19;break;case 15:return e.hasUser=!1,t.next=18,a.json();case 18:e.serverMsg=t.sent;case 19:case"end":return t.stop()}}),t)})))()}},validations:{userData:{username:{required:S["required"]},password:{required:S["required"]}}}},N=M,P=Object(m["a"])(N,j,q,!1,null,"28da6198",null),U=P.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Страница регистрации")]),e.hasUser?e._e():a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._l(e.serverMsg.username,(function(t){return a("div",{key:t},[e._v(" "+e._s(t)+" ")])})),e._l(e.serverMsg.password,(function(t){return a("div",{key:t},[e._v(" "+e._s(t)+" ")])}))],2),a("form",{on:{submit:function(t){return t.preventDefault(),e.register()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[e._v("Имя пользователя")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.username,expression:"userData.username"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.username.$error},attrs:{type:"text",id:"username",name:"username"},domProps:{value:e.userData.username},on:{blur:function(t){return e.$v.userData.username.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"username",t.target.value)}}}),e.$v.userData.username.required?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Имя пользователя" обязательно к заполнению ')]),e.$v.userData.username.minLength?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Имя пользователя" должно состоять минимум из 4 символов ')])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.email,expression:"userData.email"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.email.$error},attrs:{type:"email",id:"email",name:"email"},domProps:{value:e.userData.email},on:{blur:function(t){return e.$v.userData.email.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"email",t.target.value)}}}),e.$v.userData.email.required?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Email" обязательно к заполнению ')]),e.$v.userData.email.email?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Email" не является адресом эл. почты ')])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v("Пароль")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.password,expression:"userData.password"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.password.$error},attrs:{type:"password",id:"password",name:"password"},domProps:{value:e.userData.password},on:{blur:function(t){return e.$v.userData.password.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"password",t.target.value)}}}),e.$v.userData.password.required?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Пароль" обязательно к заполнению ')]),e.$v.userData.password.minLength?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Пароль" должно состоять минимум из 6 символов ')])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password2"}},[e._v("Повтор пароля")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.confirm_password,expression:"userData.confirm_password"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.confirm_password.$error},attrs:{type:"password",id:"password2",name:"password2"},domProps:{value:e.userData.confirm_password},on:{blur:function(t){return e.$v.userData.confirm_password.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"confirm_password",t.target.value)}}}),e.$v.userData.confirm_password.sameAs?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Повтор пароля" и поле "Пароль" должны совпадать ')])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Регистрация")])])])},R=[],T={data:function(){return{userData:{username:"",password:"",confirm_password:"",email:""},hasUser:!0,serverMsg:""}},validations:{userData:{username:{required:S["required"],minLength:Object(S["minLength"])(4),uniqName:function(e){return!!e}},email:{required:S["required"],email:S["email"],uniqEmail:function(e){return!!e}},password:{required:S["required"],minLength:Object(S["minLength"])(6)},confirm_password:{sameAs:Object(S["sameAs"])((function(e){return e.password}))}}},methods:{register:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.$store.getters.getDomen+"auth/users/",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.userData)});case 2:if(a=t.sent,e.hasUser=201===a.status,e.hasUser){t.next=10;break}return t.next=7,a.json();case 7:e.serverMsg=t.sent,t.next=15;break;case 10:alert("Создан новый пользователь!"),e.userData.username="",e.userData.password="",e.userData.confirm_password="",e.userData.email="";case 15:case"end":return t.stop()}}),t)})))()}}},L=T,A=Object(m["a"])(L,E,R,!1,null,"56ea4bf9",null),J=A.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Страница сброса пароля")]),a("form",{on:{submit:function(t){return t.preventDefault(),e.passReset()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.email,expression:"userData.email"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.email.$error},attrs:{type:"email",id:"email",name:"email"},domProps:{value:e.userData.email},on:{blur:function(t){return e.$v.userData.email.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"email",t.target.value)}}}),e.$v.userData.email.required?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Email" обязательно к заполнению ')]),e.$v.userData.email.email?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Email" не является адресом эл. почты ')])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Сброс")])])])},z=[],V={data:function(){return{userData:{email:""}}},validations:{userData:{email:{required:S["required"],email:S["email"]}}},methods:{passReset:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.userData.email="",t.next=3,fetch(e.$store.getters.getDomen+"auth/users/reset_password/",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.userData)});case 3:alert("Письмо было отправлено на почту!");case 4:case"end":return t.stop()}}),t)})))()}}},B=V,F=Object(m["a"])(B,I,z,!1,null,"2cd989f2",null),G=F.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Создание нового пароля")]),e.hasUser?e._e():a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._l(e.serverMsg.uid,(function(t){return a("div",{key:t},[e._v(" "+e._s(t)+" ")])})),e._l(e.serverMsg.token,(function(t){return a("div",{key:t},[e._v(" "+e._s(t)+" ")])})),e._l(e.serverMsg.new_password,(function(t){return a("div",{key:t},[e._v(" "+e._s(t)+" ")])}))],2),a("form",{on:{submit:function(t){return t.preventDefault(),e.res_pass()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v("Пароль")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.new_password,expression:"userData.new_password"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.new_password.$error},attrs:{type:"password",id:"password",name:"password"},domProps:{value:e.userData.new_password},on:{blur:function(t){return e.$v.userData.new_password.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"new_password",t.target.value)}}}),e.$v.userData.new_password.required?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Пароль" обязательно к заполнению ')]),e.$v.userData.new_password.minLength?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Пароль" должно состоять минимум из 6 символов ')])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password2"}},[e._v("Повтор пароля")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.confirm_password,expression:"userData.confirm_password"}],staticClass:"form-control",class:{"is-invalid":e.$v.userData.confirm_password.$error},attrs:{type:"password",id:"password2",name:"password2"},domProps:{value:e.userData.confirm_password},on:{blur:function(t){return e.$v.userData.confirm_password.$touch()},input:function(t){t.target.composing||e.$set(e.userData,"confirm_password",t.target.value)}}}),e.$v.userData.confirm_password.sameAs?e._e():a("div",{staticClass:"invalid-feedback"},[e._v(' Поле "Повтор пароля" и поле "Пароль" должны совпадать ')])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Восстановить")])])])},K=[],Q={data:function(){return{userData:{uid:this.$route.params["uid"],token:this.$route.params["token"],new_password:"",confirm_password:""},hasUser:!0,serverMsg:""}},watch:{$route:function(e){this.userData.uid=e.params["uid"],this.userData.token=e.params["token"]}},validations:{userData:{new_password:{required:S["required"],minLength:Object(S["minLength"])(6)},confirm_password:{sameAs:Object(S["sameAs"])((function(e){return e.new_password}))}}},methods:{res_pass:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.$store.getters.getDomen+"auth/users/reset_password_confirm/",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.userData)});case 2:if(a=t.sent,e.hasUser=204===a.status,e.hasUser){t.next=10;break}return t.next=7,a.json();case 7:e.serverMsg=t.sent,t.next=11;break;case 10:alert("Ваш пароль был изменен!");case 11:case"end":return t.stop()}}),t)})))()}}},W=Q,X=Object(m["a"])(W,H,K,!1,null,"45443801",null),Y=X.exports,Z=new w["a"]({routes:[{path:"/",component:O},{path:"/login/",component:U},{path:"/register/",component:J},{path:"/pass_reset/",component:G},{path:"/password/reset/confirm/:uid/:token/",component:Y}],mode:"history"});r["a"].use(w["a"]),r["a"].use(h["a"]),new r["a"]({render:function(e){return e(g)},router:Z,store:D}).$mount("#app")}});
//# sourceMappingURL=app.ec5128a5.js.map